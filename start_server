#!/usr/bin/env bash
#
# Start the Django development server on port 8080
#
# Usage:
#   ./start_server

set -e

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

# Add uv to PATH if it exists
if [ -d "$HOME/.local/bin" ]; then
    export PATH="$HOME/.local/bin:$PATH"
fi

# Activate virtual environment
if [ -d ".venv" ]; then
    source .venv/bin/activate
else
    echo "‚ùå Error: Virtual environment not found."
    echo "Run './setup' first to create the environment."
    exit 1
fi

# Start server on port 8080, bound to all interfaces for LAN access
echo "üöÄ Starting Django server on http://0.0.0.0:8080/"
echo "üì± Accessible on your LAN - find your IP with: ipconfig getifaddr en0"
echo "Press CTRL-C to stop the server"
echo ""
python manage.py runserver 0.0.0.0:8080
